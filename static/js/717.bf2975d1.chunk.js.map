{"version":3,"file":"static/js/717.bf2975d1.chunk.js","mappings":"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","sources":["pages/TakeQuiz.js"],"sourcesContent":["import { memo, useState, useCallback, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nconst TakeQuiz = memo(({ quizzes }) => {\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const quiz = quizzes.find(q => q.id === parseInt(id));\n  const currentUsername = localStorage.getItem('username');\n\n  // Create a unique key for this quiz attempt (user-specific)\n  const quizSessionKey = `quiz_${id}_${currentUsername}`;\n\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [timeRemaining, setTimeRemaining] = useState(0);\n\n  // Reset quiz state when component mounts or quiz changes\n  useEffect(() => {\n    if (quiz) {\n      // Always start fresh - session storage is only for auto-save during quiz\n      // Session is cleared when clicking \"Start Quiz\" button\n      setCurrentQuestionIndex(0);\n      setAnswers({});\n      setTimeRemaining(quiz.duration * 60);\n    }\n  }, [quiz, id, quizSessionKey]);\n\n  // Save quiz progress to sessionStorage whenever state changes\n  useEffect(() => {\n    if (quiz && timeRemaining > 0) {\n      const session = {\n        currentQuestionIndex,\n        answers,\n        timeRemaining,\n        quizId: id,\n        username: currentUsername\n      };\n      sessionStorage.setItem(quizSessionKey, JSON.stringify(session));\n    }\n  }, [currentQuestionIndex, answers, timeRemaining, quiz, id, currentUsername, quizSessionKey]);\n\n  const handleSubmit = useCallback(() => {\n    const score = quiz.questions.reduce((acc, question) => {\n      if (question.type === 'Text') {\n        return acc;\n      }\n      if (answers[question.id] === question.correctAnswer) {\n        return acc + question.points;\n      }\n      return acc;\n    }, 0);\n\n    const totalPoints = quiz.questions.reduce((acc, q) => {\n      if (q.type === 'Text') return acc;\n      return acc + q.points;\n    }, 0);\n\n    // Clear the quiz session after submission\n    sessionStorage.removeItem(quizSessionKey);\n\n    navigate(`/quiz/${id}/results`, {\n      state: {\n        score,\n        totalPoints,\n        answers,\n        quiz\n      }\n    });\n  }, [answers, quiz, navigate, id, quizSessionKey]);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setTimeRemaining(prev => prev - 1);\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [timeRemaining, handleSubmit, quiz]);\n\n  const handleAnswerChange = useCallback((questionId, answer) => {\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: answer\n    }));\n  }, []);\n\n  const handleNext = useCallback(() => {\n    if (currentQuestionIndex < quiz.questions.length - 1) {\n      setCurrentQuestionIndex(prev => prev + 1);\n    }\n  }, [currentQuestionIndex, quiz]);\n\n  const handlePrevious = useCallback(() => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1);\n    }\n  }, [currentQuestionIndex]);\n\n  if (!quiz || !quiz.questions || quiz.questions.length === 0) {\n    return (\n      <div className=\"max-w-4xl mx-auto px-4 py-8\">\n        <div className=\"bg-white rounded-xl shadow-lg p-8 text-center\">\n          <p className=\"text-xl text-gray-600 mb-4\">Quiz not found or has no questions</p>\n          <button\n            onClick={() => navigate('/')}\n            className=\"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Back to Dashboard\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const currentQuestion = quiz.questions[currentQuestionIndex];\n  const progress = ((currentQuestionIndex + 1) / quiz.questions.length) * 100;\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 py-6\">\n      <div className=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n        <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h1 className=\"text-2xl font-bold\">{quiz.title}</h1>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"bg-white/20 px-4 py-2 rounded-lg\">\n                <span className=\"text-sm\">Time: </span>\n                <span className=\"font-bold text-lg\">{formatTime(timeRemaining)}</span>\n              </div>\n            </div>\n          </div>\n          <div className=\"w-full bg-white/20 rounded-full h-2\">\n            <div\n              className=\"bg-white h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n          <p className=\"text-sm mt-2 opacity-90\">\n            Question {currentQuestionIndex + 1} of {quiz.questions.length}\n          </p>\n        </div>\n\n        <div className=\"p-8\">\n          <div className=\"mb-8\">\n            <div className=\"flex items-start gap-3 mb-6\">\n              <span className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold\">\n                {currentQuestion.type}\n              </span>\n              <span className=\"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-semibold\">\n                {currentQuestion.points} {currentQuestion.points === 1 ? 'point' : 'points'}\n              </span>\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">\n              {currentQuestion.question}\n            </h2>\n\n            {currentQuestion.type === 'MCQ' && (\n              <div className=\"space-y-3\">\n                {currentQuestion.options.map((option, index) => (\n                  <label\n                    key={index}\n                    className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${\n                      answers[currentQuestion.id] === option\n                        ? 'border-blue-600 bg-blue-50'\n                        : 'border-gray-200 hover:border-blue-300 hover:bg-gray-50'\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={`question-${currentQuestion.id}`}\n                      value={option}\n                      checked={answers[currentQuestion.id] === option}\n                      onChange={(e) => handleAnswerChange(currentQuestion.id, e.target.value)}\n                      className=\"w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"ml-3 text-gray-900\">{option}</span>\n                  </label>\n                ))}\n              </div>\n            )}\n\n            {currentQuestion.type === 'True/False' && (\n              <div className=\"space-y-3\">\n                {currentQuestion.options.map((option, index) => (\n                  <label\n                    key={index}\n                    className={`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${\n                      answers[currentQuestion.id] === option\n                        ? 'border-blue-600 bg-blue-50'\n                        : 'border-gray-200 hover:border-blue-300 hover:bg-gray-50'\n                    }`}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={`question-${currentQuestion.id}`}\n                      value={option}\n                      checked={answers[currentQuestion.id] === option}\n                      onChange={(e) => handleAnswerChange(currentQuestion.id, e.target.value)}\n                      className=\"w-5 h-5 text-blue-600 focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"ml-3 text-gray-900\">{option}</span>\n                  </label>\n                ))}\n              </div>\n            )}\n\n            {currentQuestion.type === 'Text' && (\n              <textarea\n                value={answers[currentQuestion.id] || ''}\n                onChange={(e) => handleAnswerChange(currentQuestion.id, e.target.value)}\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-600 focus:ring-2 focus:ring-blue-500 focus:outline-none\"\n                rows=\"5\"\n                placeholder=\"Type your answer here...\"\n              />\n            )}\n          </div>\n\n          <div className=\"flex justify-between items-center pt-6 border-t\">\n            <button\n              onClick={handlePrevious}\n              disabled={currentQuestionIndex === 0}\n              className=\"px-6 py-2.5 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Previous\n            </button>\n\n            <div className=\"flex gap-2\">\n              {quiz.questions.map((_, index) => (\n                <button\n                  key={index}\n                  onClick={() => setCurrentQuestionIndex(index)}\n                  className={`w-10 h-10 rounded-lg font-medium transition-all ${\n                    index === currentQuestionIndex\n                      ? 'bg-blue-600 text-white'\n                      : answers[quiz.questions[index].id]\n                      ? 'bg-green-100 text-green-700 border-2 border-green-500'\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  {index + 1}\n                </button>\n              ))}\n            </div>\n\n            {currentQuestionIndex === quiz.questions.length - 1 ? (\n              <button\n                onClick={handleSubmit}\n                className=\"px-6 py-2.5 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors\"\n              >\n                Submit Quiz\n              </button>\n            ) : (\n              <button\n                onClick={handleNext}\n                className=\"px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                Next\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nTakeQuiz.displayName = 'TakeQuiz';\n\nexport default TakeQuiz;\n"],"names":["TakeQuiz","memo","_ref","quizzes","navigate","useNavigate","id","useParams","quiz","find","q","parseInt","currentUsername","localStorage","getItem","quizSessionKey","concat","currentQuestionIndex","setCurrentQuestionIndex","useState","answers","setAnswers","timeRemaining","setTimeRemaining","useEffect","duration","session","quizId","username","sessionStorage","setItem","JSON","stringify","handleSubmit","useCallback","score","questions","reduce","acc","question","type","correctAnswer","points","totalPoints","removeItem","state","timer","setInterval","prev","clearInterval","handleAnswerChange","questionId","answer","_objectSpread","handleNext","length","handlePrevious","_jsx","className","children","_jsxs","onClick","currentQuestion","progress","title","seconds","mins","Math","floor","secs","toString","padStart","formatTime","style","width","options","map","option","index","name","value","checked","onChange","e","target","rows","placeholder","disabled","_","displayName"],"ignoreList":[],"sourceRoot":""}